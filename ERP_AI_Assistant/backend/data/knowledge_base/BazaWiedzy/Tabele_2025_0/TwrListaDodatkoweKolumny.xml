<?xml version="1.0" encoding="windows-1250" ?>
<?xml-stylesheet type="text/xsl" href="Style\Sql.xsl" ?>
<!-- Plik wygenerowany automatycznie ze skryptu sql 21.7.2024 21:55:56 -->
<!-- Copyright (C)CDN 2003 -->
<ROOT>
<functiondef name="[TwrListaDodatkoweKolumny]">
CREATE FUNCTION [CDN].[TwrListaDodatkoweKolumny] (
	@TwrGIdNumer INT
	,@TwrGIdTyp SMALLINT
	,@TwrTyp SMALLINT --typ towaru Towar - 1, Produkt - 2, Koszt - 3, Us³uga - 4 
	,@Kolumny TINYINT --zawiera flagê bitow¹ wyœwietlanych kolumn (pierwsza kolumna ma wartoœæ 1, druga 2, trzecia 4, czwarta 8, piata 16, szósta 32).
	,@MagFirma INT --g@MagNumer &lt; 0 to zawiera ujemny numer sesji, reszta przypadków to identyfikator firmy
	,@MagNumer INT --@MagNumer &gt; 0 to numer wybranego magazynu, =0 to wszystkie magazyny, &lt;0 wybrane magazyny (zawiera wtedy ujemny numer w¹tku) 
	,@MagLp SMALLINT --@MagNumer &lt; 0 to -1 opcja wybrane, -2 opcja oddzia³u (gdy aktywna), reszta przypadków liczba porz¹dkowa magazynu (czyli 0)
	,@Centrum INT --@Centrum &gt; 0 identyfikator centrum w którym jest otwierana lista towarów
	,@CentrumWla INT --@CentrumWla &gt; 0 identyfikator centrum w³aœciciela dokumentu, gdy lista towarów jest otwierana z dokumentu przypisanego do centrum
	,@DokTyp SMALLINT --@DokTyp &gt; 0 typ dokumentu w kontekscie którego jest otwierana lista towarów
	,@KntNumer INT --@KntNumer &gt; -1 numer kontrahenta w kontekscie którego otwierana jest lista towarów
	,@NumerCeny SMALLINT --numer ceny wybranej w filtrze
	,@OpeNumer INT --numer operatora otwieraj¹cego listê twr
	)
RETURNS VARCHAR(254)
AS
BEGIN
	DECLARE @ReturnValue VARCHAR(254)

	IF @Kolumny &amp; 1 = 1
	BEGIN
		--tutaj zamiast poni¿szego w³asny kod ustawiaj¹cy wartoœæ i kolory dla pierwszej kolumny
		SET @ReturnValue = space(42)
	END
	ELSE
		SET @ReturnValue = space(42)

	IF @Kolumny &amp; 2 = 2
	BEGIN
		--tutaj zamiast poni¿szego w³asny kod ustawiaj¹cy wartoœæ i kolory dla drugiej kolumny
		SET @ReturnValue = @ReturnValue + space(42)
	END
	ELSE
		SET @ReturnValue = @ReturnValue + space(42)

	IF @Kolumny &amp; 4 = 4
	BEGIN
		--tutaj zamiast poni¿szego w³asny kod ustawiaj¹cy wartoœæ i kolory dla trzeciej kolumny
		SET @ReturnValue = @ReturnValue + space(42)
	END
	ELSE
		SET @ReturnValue = @ReturnValue + space(42)

	IF @Kolumny &amp; 8 = 8
	BEGIN
		--tutaj zamiast poni¿szego w³asny kod ustawiaj¹cy wartoœæ i kolory dla czwarttej kolumny
		SET @ReturnValue = @ReturnValue + space(42)
	END
	ELSE
		SET @ReturnValue = @ReturnValue + space(42)

	IF @Kolumny &amp; 16 = 16
	BEGIN
		--tutaj zamiast poni¿szego w³asny kod ustawiaj¹cy wartoœæ i kolory dla pi¹tej kolumny
		SET @ReturnValue = @ReturnValue + space(42)
	END
	ELSE
		SET @ReturnValue = @ReturnValue + space(42)

	IF @Kolumny &amp; 32 = 32
	BEGIN
		--tutaj zamiast poni¿szego w³asny kod ustawiaj¹cy wartoœæ i kolory dla szóstej kolumny
		SET @ReturnValue = @ReturnValue + space(42)
	END
	ELSE
		SET @ReturnValue = @ReturnValue + space(42)

	RETURN isnull(@ReturnValue, space(254))
END
	--&lt;
GO

GRANT EXECUTE
	ON CDN.TwrListaDodatkoweKolumny
	TO CDNRaport
		--&lt;
GO


</ROOT>
